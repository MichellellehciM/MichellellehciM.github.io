---

title: Python OOPå…¥é–€æŒ‡å— (äºŒ) ï¼šæŠ½è±¡  æŒæ¡ ABC èˆ‡ @abstractmethod
description: æœ¬ç¯‡æ•™ä½ å¾é›¶é–‹å§‹ç†è§£ä»€éº¼æ˜¯ Python çš„æŠ½è±¡é¡åˆ¥ï¼ˆabstract classï¼‰ï¼Œç”¨ç°¡å–®ç¯„ä¾‹å¹«åŠ©æ–°æ‰‹å­¸æœƒè¨­è¨ˆè¦ç¯„èˆ‡ç¹¼æ‰¿ã€‚
slug: python-abstract-class-guide
date: 2025-05-26 10:00:00+0000
image: python_abc_guide.png
categories:
- Python
- ç¨‹å¼è¨­è¨ˆ
tags:
- PythonåŸºç¤
- OOP
- æŠ½è±¡é¡åˆ¥
- abstract class
- ç¹¼æ‰¿
- abc
weight:
-------



## æŠ½è±¡é¡åˆ¥æ˜¯ä»€éº¼ï¼Ÿ

**æŠ½è±¡é¡åˆ¥ï¼ˆAbstract Classï¼‰** æ˜¯ä¸€ç¨® **ç„¡æ³•è¢«ç›´æ¥å¯¦ä¾‹åŒ–** çš„é¡åˆ¥ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”æ˜¯ä½œç‚ºã€Œæ¨¡æ¿ã€æä¾›ä¸€å¥—æ˜ç¢ºçš„è¨­è¨ˆè¦ç¯„ï¼Œè®“å­é¡åˆ¥å»å¯¦ä½œå¿…è¦çš„æ–¹æ³•ã€‚

ç°¡å–®ä¾†èªªï¼ŒæŠ½è±¡å°±æ˜¯éš±è—ä¸å¿…è¦çš„ç´°ç¯€ï¼Œä¿ç•™å°ä½¿ç”¨è€…æœ‰æ„ç¾©çš„éƒ¨åˆ†ã€‚



æƒ³åƒä½ åœ¨ä¾¿åˆ©å•†åº—é»é£²æ–™ï¼Œä½ åªæœƒæŒ‰ä¸‹ã€Œå†°ç¾å¼ã€ï¼Œä¸æœƒå»æ§åˆ¶æ°´æº«ã€è±†é‡ã€å£“åŠ›å€¼ã€‚å’–å•¡æ©Ÿå¹«ä½ åŒ…è¾¦äº†èƒŒå¾Œçš„è¤‡é›œç¨‹åºï¼Œè€Œä½ åªéœ€è¦æ“ä½œã€Œmake_drink()ã€é€™å€‹ä»‹é¢ã€‚

> **æŠ½è±¡è®“ä½ åªçœ‹è¦‹ã€Œä½ éœ€è¦çš„æ“ä½œã€ï¼Œä¸è¢«å…§éƒ¨ç´°ç¯€å¹²æ“¾ã€‚**

## æŠ½è±¡é¡åˆ¥çš„ä¸‰å¤§ç‰¹æ€§ï¼š

* **ä¸èƒ½ç›´æ¥å»ºç«‹å¯¦ä¾‹**
* **åŒ…å«ä¸€å€‹æˆ–å¤šå€‹æŠ½è±¡æ–¹æ³•**
* **å­é¡åˆ¥å¿…é ˆå¯¦ä½œæ‰€æœ‰æŠ½è±¡æ–¹æ³•æ‰èƒ½ä½¿ç”¨**


> **æŠ½è±¡é¡åˆ¥åƒæ˜¯ä¸€ä»½â€œä»‹é¢å¥‘ç´„â€ï¼Œå¼·è¿«æ‰€æœ‰å­é¡åˆ¥éµå®ˆé€™ä»½è¦å®šï¼Œé¿å…éºæ¼å¿…è¦åŠŸèƒ½ã€‚**



## ç‚ºä»€éº¼è¦ä½¿ç”¨æŠ½è±¡é¡åˆ¥ï¼Ÿ

| å„ªé»     | èªªæ˜                 |
| ------ | ------------------ |
| çµ±ä¸€è¦ç¯„   | å¼·åˆ¶å­é¡åˆ¥éƒ½å¯¦ä½œç‰¹å®šæ–¹æ³•ï¼Œç¢ºä¿ä¸€è‡´æ€§ |
| æ˜“æ–¼æ“´å……   | å­é¡åˆ¥çš„åŠŸèƒ½çµæ§‹æ¸…æ™°ï¼Œä¸æ˜“å‡ºéŒ¯    |
| é¿å…éºæ¼   | æ¯ä½é–‹ç™¼è€…çŸ¥é“è©²å¯¦ä½œå“ªäº›æ–¹æ³•     |
| é©åˆåœ˜éšŠåˆä½œ | æ˜ç¢ºé–‹ç™¼è¦ç¯„ï¼Œåˆä½œæ›´é †æš¢       |

---

## Python å¦‚ä½•å¯¦ä½œæŠ½è±¡é¡åˆ¥ï¼Ÿ

Python ä¸¦ä¸åƒ Javaã€C++ å…§å»º abstract é—œéµå­—ï¼Œè€Œæ˜¯é€éå…§å»ºæ¨¡çµ„ `abc`ï¼ˆAbstract Base Classï¼‰ä¾†é”æˆã€‚

## å»ºç«‹æŠ½è±¡é¡åˆ¥çš„ä¸‰æ­¥é©Ÿ :

### ç¬¬ä¸€æ­¥ï¼šåŒ¯å…¥æ¨¡çµ„

```python
import abc 
from abc import ABC, abstractmethod  # ABC æ˜¯å…§å»ºçš„æŠ½è±¡é¡åˆ¥åŸºåº•é¡åˆ¥
```


å¯ä¸è¦è¦ºå¾— ABC æ˜¯å› ç‚ºäººå®¶æ‡¶å¾—æƒ³åå­—è€Œéš¨ä¾¿å–çš„å”· <br>
åªæ˜¯ç°¡å¯«çœŸçš„å‰›å¥½æ˜¯ABC~ 


**abc = æ¨¡çµ„åç¨±** <br> 
**ABC = Abstract Base Classes (æ¨¡çµ„åŸºåº•é¡åˆ¥)** <br>
**@abstractmethod = ç”¨ä¾†å®šç¾©æŠ½è±¡æ–¹æ³•çš„è£é£¾å™¨**

### ç¬¬äºŒæ­¥ï¼šå®šç¾©æŠ½è±¡é¡åˆ¥èˆ‡æŠ½è±¡æ–¹æ³•

```python
class Animal(ABC):  # ç¹¼æ‰¿ ABC æˆç‚ºæŠ½è±¡é¡åˆ¥
    @abstractmethod
    def make_sound(self):  # æŠ½è±¡æ–¹æ³•ï¼Œæ²’æœ‰å¯¦ä½œå…§å®¹
        pass
```

### ç¬¬ä¸‰æ­¥ï¼šç”±å­é¡åˆ¥å¯¦ä½œæŠ½è±¡æ–¹æ³•

```python
class Dog(Animal):
    def make_sound(self):  # å¿…é ˆå¯¦ä½œçˆ¶é¡åˆ¥çš„æŠ½è±¡æ–¹æ³•
        print("æ±ªæ±ªï¼")

class Cat(Animal):
    def make_sound(self):
        print("å–µå–µï¼")
```


ä¸€æ—¦é¡åˆ¥ä¸­åŒ…å« `@abstractmethod` æ–¹æ³•ï¼Œè©²é¡åˆ¥å°±**ä¸èƒ½è¢«å¯¦ä¾‹åŒ–**ã€‚
<br>å®ƒæœƒæ¨™è¨˜ä¸€å€‹æ–¹æ³•ç‚ºã€ŒæŠ½è±¡ã€ï¼Œä»£è¡¨é€™å€‹æ–¹æ³•**åœ¨çˆ¶é¡åˆ¥ä¸­ä¸æä¾›å¯¦ä½œç´°ç¯€ï¼Œè€Œæ˜¯ç•™çµ¦å­é¡åˆ¥è‡ªè¡Œå®šç¾©ã€‚**

å¦‚æœå­é¡åˆ¥æ²’æœ‰å¯¦ä½œæ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå°‡ç„¡æ³•å»ºç«‹è©²é¡åˆ¥çš„å¯¦ä¾‹ï¼Œæœƒæ‹‹å‡º TypeErrorã€‚(çœ‹ä¸‹æ–¹ç¯„ä¾‹)




```python
class Dog(Animal):
    def make_sound(self):
        print("æ±ªæ±ª")  # æœ‰å¯¦ä½œ âœ”ï¸

d = Dog()  # å»ºç«‹å¯¦ä¾‹
d.make_sound()  # æ±ªæ±ª
```


```python
class Dog(Animal):
    def make_sound(self):
        pass  # âŒ é›–ç„¶èªæ³•æ­£ç¢ºï¼Œä½†æ²’æœ‰å¯¦éš›å…§å®¹ï¼Œè¦–ç‚ºæœªå¯¦ä½œ

# d = Dog()  âŒ TypeError: Can't instantiate abstract class Dog with abstract method make_sound
```

---

## âœ… å®Œæ•´ç¯„ä¾‹ï¼šå‹•ç‰©å«è²ç³»çµ±

```python
from abc import ABC, abstractmethod

# æŠ½è±¡é¡åˆ¥
class Animal(ABC):
    @abstractmethod
    def make_sound(self):
        pass

    def sleep(self):
        print("Zzz...")  # æŠ½è±¡é¡åˆ¥ä¹Ÿå¯æœ‰ä¸€èˆ¬æ–¹æ³•

# å­é¡åˆ¥å¯¦ä½œ
class Dog(Animal):
    def make_sound(self):
        print("æ±ªæ±ªï¼")

class Cat(Animal):
    def make_sound(self):
        print("å–µå–µï¼")

# a = Animal()  # âŒ TypeErrorï¼šç„¡æ³•å»ºç«‹æŠ½è±¡é¡åˆ¥çš„å¯¦ä¾‹

d = Dog()
d.make_sound()  # æ±ªæ±ªï¼
d.sleep()       # Zzz...
```

---

## ğŸ’¬ å¸¸è¦‹å•é¡Œ Q\&A

### Q1: æŠ½è±¡å’Œå°è£æœ‰ä»€éº¼ä¸åŒï¼Ÿ

æŠ½è±¡æ˜¯éš±è—å¯¦ä½œè¡Œç‚ºã€åªå°å¤–æä¾›æ¥å£ï¼›å°è£æ˜¯ä¿è­·è³‡æ–™ä¸è¢«ä»»æ„å­˜å–ã€‚

### Q2ï¼šä¸€å®šè¦ç”¨ `ABC` å—ï¼Ÿ

æ˜¯çš„ï¼Œç¹¼æ‰¿ `ABC` æˆ–ä½¿ç”¨  `metaclass = ABCMeta`  æ˜¯ Python æŠ½è±¡é¡åˆ¥çš„å¿…è¦è¨­å®šã€‚

```python
# å¦ä¸€ç¨®å¯«æ³•
class Animal(metaclass=abc.ABCMeta):
    @abc.abstractmethod
    def make_sound(self):
        pass
```

### Q3ï¼šå¦‚æœå­é¡åˆ¥æ²’æœ‰å¯¦ä½œæŠ½è±¡æ–¹æ³•æœƒæ€æ¨£ï¼Ÿ

æœƒåœ¨å»ºç«‹å­é¡åˆ¥å¯¦ä¾‹æ™‚æ‹‹å‡º `TypeError`ï¼Œæé†’ä½ æ²’æœ‰å¯¦ä½œå¿…è¦çš„æ–¹æ³•ã€‚ <br>
**(â†‘çœ‹ä¸Šé¢å‹•ç‰©å«è²ç³»çµ±ç¯„ä¾‹)**

### Q4ï¼šæŠ½è±¡é¡åˆ¥å¯ä»¥åŒ…å«æ™®é€šæ–¹æ³•å—ï¼Ÿ

å¯ä»¥ã€‚é™¤äº†æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å¯«ä¸€èˆ¬æ–¹æ³•ï¼Œæä¾›å­é¡åˆ¥å…±ç”¨çš„åŠŸèƒ½ã€‚

```python
class Animal(ABC):
    @abstractmethod
    def make_sound(self):    # æŠ½è±¡æ–¹æ³•
        pass    # æ²’æœ‰å¯¦ä½œå…§å®¹ï¼Œåªæ˜¯ä¸€å€‹è¦ç¯„æ¥å£

    def sleep(self):         # ä¸€èˆ¬æ–¹æ³•
        print("Zzz...")
```

### Q5ï¼šæŠ½è±¡é¡åˆ¥å¯ä»¥åŠ å±¬æ€§å—ï¼Ÿ

å¯ä»¥ï¼Œä½†å»ºè­°æ”¾å…±ç”¨æˆ–åˆå§‹åŒ–ç”¨çš„å±¬æ€§ï¼Œå…·é«”é‚è¼¯ç•™çµ¦å­é¡åˆ¥è™•ç†ã€‚

### Q6ï¼šä»€éº¼æ™‚å€™æ‡‰è©²ä½¿ç”¨æŠ½è±¡é¡åˆ¥ï¼Ÿ

ç•¶ä½ å¸Œæœ›æ¯å€‹å­é¡åˆ¥éƒ½éµå®ˆçµ±ä¸€è¦å‰‡æˆ–çµæ§‹ï¼ˆå¦‚ï¼šä»˜æ¬¾ã€è¼‰å…·ã€é€šçŸ¥é¡åˆ¥ï¼‰ã€‚

### Q7ï¼šABC æ˜¯ä»€éº¼ï¼Ÿå’Œ metaclass=ABCMeta æœ‰ä»€éº¼é—œä¿‚ï¼Ÿ

ABC å°±æ˜¯ metaclass=ABCMeta çš„èªæ³•ç³–ï¼ˆsyntactic sugarï¼‰ã€‚
å¯« `class A(ABC):` çš„æ•ˆæœç­‰åŒæ–¼ `class A(metaclass=ABCMeta)`ã€‚
é€™æ¨£å¯«æ›´ç°¡æ½”å¯è®€ï¼Œä¹Ÿæ›´å¸¸è¦‹

---

## ğŸ’¡ å»¶ä¼¸è£œå……ï¼šmetaclass æ˜¯ä»€éº¼ï¼Ÿ

åœ¨ Python ä¸­ï¼Œä¸€åˆ‡çš†ç‰©ä»¶ï¼Œ**é¡åˆ¥ä¹Ÿæ˜¯ä¸€ç¨®ç‰©ä»¶**ï¼Œå®ƒçš„é¡å‹å°±æ˜¯ `type`ã€‚

```python
class Product:
    pass

print(type(Product))  # <class 'type'>
```
ä¹Ÿå°±æ˜¯èªªï¼š

1. Product æ˜¯ä¸€å€‹é¡åˆ¥ï¼ˆclassï¼‰

2. ä½†å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€å€‹ç‰©ä»¶

3. å®ƒæ˜¯ç”± type é¡åˆ¥å‰µé€ å‡ºä¾†çš„ç‰©ä»¶ï¼ˆä¹Ÿå°±æ˜¯ Python ä¸­é è¨­çš„ metaclassï¼‰

```python
from abc import ABC, abstractmethod

class Animal(ABC):  # èƒŒå¾Œå…¶å¯¦æ˜¯ metaclass=ABCMeta
    @abstractmethod
    def make_sound(self):
        pass

```

ç•¶ä½ ä½¿ç”¨ `metaclass=ABCMeta`ï¼Œå°±æ˜¯å‘Šè¨´ Python ä½¿ç”¨ä¸€å€‹ç‰¹åˆ¥çš„é¡å‹ï¼ˆMetaClassï¼‰ä¾†å®šç¾©é€™å€‹é¡åˆ¥ï¼Œä½¿å…¶å…·å‚™ã€ŒæŠ½è±¡é¡åˆ¥ã€çš„è¡Œç‚ºã€‚

---

## ç¸½çµï¼šå»ºç«‹æŠ½è±¡é¡åˆ¥ 3 æ­¥é©Ÿ

1ï¸âƒ£ `from abc import ABC, abstractmethod` <br>
2ï¸âƒ£ `class é¡åˆ¥å(ABC):` <br>
3ï¸âƒ£ ç”¨ `@abstractmethod`  <br>

æŠ½è±¡é¡åˆ¥æ˜¯ä¸€ç¨®è®“ç¨‹å¼è¨­è¨ˆæ›´æœ‰ã€Œæ¶æ§‹ã€çš„åˆ©å™¨ï¼Œç‰¹åˆ¥é©åˆç”¨åœ¨å¤§å‹å°ˆæ¡ˆæˆ–å¤šäººé–‹ç™¼æ™‚çµ±ä¸€è¦æ ¼ã€‚

<br>

## ğŸ¤” è…¦åŠ›æ¿€ç›ª - æ”¯ä»˜æ¨¡çµ„è¨­è¨ˆ

å‡è¨­ä½ æ­£åœ¨å¯«ä¸€å€‹æ”¯ä»˜æ¨¡çµ„ï¼ˆPaymentï¼‰ï¼Œæœ‰å“ªäº›æ–¹æ³•æ‡‰è©²æ˜¯æŠ½è±¡çš„ï¼Ÿä½ æœƒæ€éº¼å¯¦ä½œ `CreditCard`ã€`LinePay`ã€`è¡—å£æ”¯ä»˜` ç­‰å­é¡åˆ¥ï¼Ÿ

---

(åƒè€ƒç­”æ¡ˆ)<br><br>
(1) æˆ‘å€‘å¯ä»¥å…ˆå®šç¾©ä¸€å€‹æŠ½è±¡åŸºåº•é¡åˆ¥ Paymentï¼Œæ‰€æœ‰æ”¯ä»˜æ–¹å¼éƒ½è¦éµå®ˆä»¥ä¸‹çµ±ä¸€æ¥å£ï¼š
```python
from abc import ABC, abstractmethod

class Payment(ABC):
    @abstractmethod
    def authorize(self, amount):
        """é©—è­‰æ˜¯å¦å¯ä»¥ä»˜æ¬¾ï¼Œä¾‹å¦‚æª¢æŸ¥é¤˜é¡æˆ–æˆæ¬Šç¢¼"""
        pass

    @abstractmethod
    def pay(self, amount):
        """åŸ·è¡Œå¯¦éš›ä»˜æ¬¾é‚è¼¯"""
        pass

    @abstractmethod
    def refund(self, amount):
        """é€€æ¬¾æµç¨‹"""
        pass

```

(2) å­é¡åˆ¥å¯¦ä½œ (CreditCard ä¿¡ç”¨å¡æ”¯ä»˜ ã€ LinePay ã€ è¡—å£æ”¯ä»˜)

```python
class CreditCard(Payment):
    def authorize(self, amount):
        print(f"ä¿¡ç”¨å¡æˆæ¬Š {amount} å…ƒé€šé")

    def pay(self, amount):
        print(f"å·²ç”¨ä¿¡ç”¨å¡ä»˜æ¬¾ {amount} å…ƒ")

    def refund(self, amount):
        print(f"å·²é€€é‚„ä¿¡ç”¨å¡æ¬¾é … {amount} å…ƒ")
```

```python
class LinePay(Payment):
    def authorize(self, amount):
        print(f"LinePay æˆæ¬ŠæˆåŠŸï¼Œé‡‘é¡ï¼š{amount}")

    def pay(self, amount):
        print(f"LinePay å®Œæˆä»˜æ¬¾ {amount} å…ƒ")

    def refund(self, amount):
        print(f"LinePay é€€æ¬¾ {amount} å…ƒæˆåŠŸ")
```

```python
class JKOPay(Payment):
    def authorize(self, amount):
        print(f"è¡—å£æ”¯ä»˜å·²æˆæ¬Š {amount} å…ƒ")

    def pay(self, amount):
        print(f"è¡—å£æ”¯ä»˜å®Œæˆä»˜æ¬¾ {amount} å…ƒ")

    def refund(self, amount):
        print(f"è¡—å£æ”¯ä»˜å·²å®Œæˆé€€æ¬¾ {amount} å…ƒ")
```

```python
def process_payment(method: Payment, amount: int):
    method.authorize(amount)
    method.pay(amount)
    method.refund(amount)

process_payment(CreditCard(), 500)
process_payment(LinePay(), 800)


# ä¿¡ç”¨å¡æˆæ¬Š 500 å…ƒé€šé
# å·²ç”¨ä¿¡ç”¨å¡ä»˜æ¬¾ 500 å…ƒ
# å·²é€€é‚„ä¿¡ç”¨å¡æ¬¾é … 500 å…ƒ

# LinePay æˆæ¬ŠæˆåŠŸï¼Œé‡‘é¡ï¼š800
# LinePay å®Œæˆä»˜æ¬¾ 800 å…ƒ
# LinePay é€€æ¬¾ 800 å…ƒæˆåŠŸ

```
ä»¥ä¸Šå¯¦ä½œåŒ…å«äº†OOPä¸­**æŠ½è±¡**å’Œ**å¤šå‹**çš„æ‡‰ç”¨ï¼š
- æŠ½è±¡ï¼ˆAbstractionï¼‰ æ˜¯ç‚ºäº†å»ºç«‹çµ±ä¸€çš„ä»‹é¢ï¼Œåƒ authorize()ã€pay()ã€refund()ã€‚

- å¤šå‹ï¼ˆPolymorphismï¼‰ å‰‡æ˜¯åˆ©ç”¨é€™å€‹ä»‹é¢ï¼Œè®“ä¸åŒå­é¡ï¼ˆå¦‚ CreditCard, LinePayï¼‰åœ¨ ä¸æ”¹è®Šå‡½å¼ process_payment() å¯«æ³•çš„å‰æä¸‹å¯¦ç¾ä¸åŒçš„è¡Œç‚ºã€‚

ä¸‹å€‹ç« ç¯€æœƒå¸¶å¤§å®¶æ›´äº†è§£OOPçš„å¤šå‹! è«‹æ‹­ç›®ä»¥å¾…~

---